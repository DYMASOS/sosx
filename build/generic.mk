#******************************************************************************
#*
#*   FILE
#*   ----
#*   generic.mk - Makefile for user libs (generic part)
#******************************************************************************
#*
#*   This file is generated by the 'acplt_makmak' command
#*
#******************************************************************************

#	Directories
#	-----------

MODEL_DIR         = ../../model/
SOURCE_DIR        = ../../source/
INCLUDE_DIR       = ../../include/
USER_DIR          = ../../../
USERLIB_DIR       = $(USER_DIR)libs
ROOT_DIR          = ../../../../
BASE_DIR          = $(ROOT_DIR)
BASE_INC_DIR      = $(BASE_DIR)include/
BASE_LIB_DIR      = $(BASE_DIR)lib/
BASE_MODEL_DIR    = $(BASE_DIR)model/
BIN_DIR           = $(ROOT_DIR)bin/
KSBASE_MODEL_DIR           = $(USER_DIR)ksbase/model/
KSBASE_INCLUDE_DIR         = $(USER_DIR)ksbase/include/
KSAPI_MODEL_DIR           = $(USER_DIR)ksapi/model/
KSAPI_INCLUDE_DIR         = $(USER_DIR)ksapi/include/
CAEX_MODEL_DIR           = $(USER_DIR)caex/model/
CAEX_INCLUDE_DIR         = $(USER_DIR)caex/include/
FB_MODEL_DIR           = $(USER_DIR)fb/model/
FB_INCLUDE_DIR         = $(USER_DIR)fb/include/
FBCOMLIB_MODEL_DIR           = $(USER_DIR)fbcomlib/model/
FBCOMLIB_INCLUDE_DIR         = $(USER_DIR)fbcomlib/include/
KSXDR_MODEL_DIR           = $(USER_DIR)ksxdr/model/
KSXDR_INCLUDE_DIR         = $(USER_DIR)ksxdr/include/
KSXDRGETHIST_MODEL_DIR           = $(USER_DIR)ksxdrgethist/model/
KSXDRGETHIST_INCLUDE_DIR         = $(USER_DIR)ksxdrgethist/include/
#   Rules
#   -----

.SUFFIXES:
.SUFFIXES: $(_C) .h .ovm $(_LIB) $(_DLL) $(_OBJ)

#	Paths and defines
#	-----------------

ifeq ($(COMPILER), MSVC)
INCLUDES  = /I$(BASE_INC_DIR) /I$(BASE_MODEL_DIR) \
			/I$(KSBASE_MODEL_DIR) /I$(KSBASE_INCLUDE_DIR) \
			/I$(KSAPI_MODEL_DIR) /I$(KSAPI_INCLUDE_DIR) \
			/I$(CAEX_MODEL_DIR) /I$(CAEX_INCLUDE_DIR) \
			/I$(FB_MODEL_DIR) /I$(FB_INCLUDE_DIR) \
			/I$(FBCOMLIB_MODEL_DIR) /I$(FBCOMLIB_INCLUDE_DIR) \
			/I$(KSXDR_MODEL_DIR) /I$(KSXDR_INCLUDE_DIR) \
			/I$(KSXDRGETHIST_MODEL_DIR) /I$(KSXDRGETHIST_INCLUDE_DIR) \
			/I$(MODEL_DIR) /I$(INCLUDE_DIR)
else
INCLUDES  = -I$(BASE_INC_DIR) -I$(BASE_MODEL_DIR)\
			-I$(KSBASE_MODEL_DIR) -I$(KSBASE_INCLUDE_DIR) \
			-I$(KSAPI_MODEL_DIR) -I$(KSAPI_INCLUDE_DIR) \
			-I$(CAEX_MODEL_DIR) -I$(CAEX_INCLUDE_DIR) \
			-I$(FB_MODEL_DIR) -I$(FB_INCLUDE_DIR) \
			-I$(FBCOMLIB_MODEL_DIR) -I$(FBCOMLIB_INCLUDE_DIR) \
			-I$(KSXDR_MODEL_DIR) -I$(KSXDR_INCLUDE_DIR) \
			-I$(KSXDRGETHIST_MODEL_DIR) -I$(KSXDRGETHIST_INCLUDE_DIR) \
			-I$(MODEL_DIR) -I$(INCLUDE_DIR)
endif

VPATH     = $(MODEL_DIR) $(SOURCE_DIR) $(INCLUDE_DIR) \
			$(KSBASE_MODEL_DIR) $(KSBASE_INCLUDE_DIR) \
			$(KSAPI_MODEL_DIR) $(KSAPI_INCLUDE_DIR) \
			$(CAEX_MODEL_DIR) $(CAEX_INCLUDE_DIR) \
			$(FB_MODEL_DIR) $(FB_INCLUDE_DIR) \
			$(FBCOMLIB_MODEL_DIR) $(FBCOMLIB_INCLUDE_DIR) \
			$(KSXDR_MODEL_DIR) $(KSXDR_INCLUDE_DIR) \
			$(KSXDRGETHIST_MODEL_DIR) $(KSXDRGETHIST_INCLUDE_DIR) \
			$(BASE_INC_DIR) $(BASE_MODEL_DIR)

ifeq ($(COMPILER), MSVC)
DEFINES    = /DOV_SYSTEM_$(SYSTEM)=1 /DPLT_SYSTEM_$(SYSTEM)=1 /Dov_library_open_sosx=ov_library_open_sosx_old
else
DEFINES    = -DOV_SYSTEM_$(SYSTEM)=1 -DPLT_SYSTEM_$(SYSTEM)=1 -Dov_library_open_sosx=ov_library_open_sosx_old
endif

#	User library
#	------------

LIBRARY        = sosx
USERLIB_C      = $(LIBRARY)$(_C)
USERLIB_LIB    = $(LIBRARY)$(_LIB)
USERLIB_DLL    = $(LIBRARY)$(_DLL)

#	Targets
#	-------
USERLIB_SRC = $(USERLIB_C) $(wildcard $(SOURCE_DIR)*$(_C))
USERLIB_OBJ = $(foreach source, $(USERLIB_SRC), $(basename $(notdir $(source)))$(_OBJ))

HEADERS = \
	ov.h \
	ksbase.h \
	ksapi.h \
	caex.h \
	fb.h \
	fbcomlib.h \
	ksxdr.h \
	ksxdrgethist.h \
	sosx.h 

ifndef STATIC_ONLY
TARGETS = \
	$(HEADERS) \
	$(USERLIB_LIB) \
	$(USERLIB_DLL)
else
TARGETS = \
	$(HEADERS) \
	$(USERLIB_LIB)
endif

SOURCES = \
	ov.h \
	ksbase.h \
	ksapi.h \
	caex.h \
	fb.h \
	fbcomlib.h \
	ksxdr.h \
	ksxdrgethist.h \
	$(USERLIB_SRC)

